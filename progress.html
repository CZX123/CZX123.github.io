<!DOCTYPE html>
<ol></ol>
<script>
var xhr = new XMLHttpRequest;
xhr.onprogress = function(event) {
  var progress = 0;
  if (event.lengthComputable) {
      progress = event.loaded/event.total * 100;
  }
  else {
      var total = +xhr.getResponseHeader('content-length'),
          encoding = xhr.getResponseHeader('content-encoding');
      if (total && encoding && (encoding.indexOf('gzip') > -1)) {
          // assuming average gzip compression ratio to be 1/3
          total *= 3;
          progress = Math.min(100, event.loaded/total * 100);
      }
  }
  console.log(progress);
  var li = document.createElement("li");
  li.textContent = JSON.stringify({loaded: event.loaded, total: event.total, lengthComputable: event.lengthComputable, Progress: progress});
  document.body.firstChild.appendChild(li);
};
xhr.open("GET", "progress.txt");
xhr.send();
</script>
